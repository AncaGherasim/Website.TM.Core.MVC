function ShowHideMore(n,t){for(i=1;i<=t;i++){var r=i.toString();i<=n?($(".dvpage"+r).show(),i<n&&$("#displayMore"+r).hide()):$(".dvpage"+r).hide()}}function buildRecentlyViewed(n){var t,r,i,u,f;console.log("buildRecentlyViewed");t="";r=10;t=t+'<div class="dvViewList">';i=Math.ceil(n.length/r);console.log("buildRecentlyViewed jsonObj.length = "+n.length);console.log("buildRecentlyViewed noPages = "+i);for(let e=1;e<=i;e++)t=t+'<div class="dvpage'+e+'">',u=0,jQuery.each(n,function(){u++;u>(e-1)*r&&u<=e*r&&(t=t+`<div class="dvEachView">
					       <div class="dvViewImage">
						     <img src="https://pictures.tripmasters.com${this.IMG_Path_URL.toLowerCase()}"/>
                           </div>
						   <div class="dvViewInfo">
						     <div>
							   <a href="${getSiteURL(this.UTS_Site)}/${this.STR_PlaceTitle.replace(/ /g,"_")}/${this.PDL_Title.replace(/ /g,"_")}/package-${this.PDLID}">${this.PDL_Title}</a>
                             </div>
						     <div class="dvViewIncludes">
							   <span>Itinerary Includes:</span>
							   <ul>
                                 ${this.PDL_Content.split("\r\n").map(function(n){return`<li>${n}</li>`})}
							   </ul>
							 </div>
						 </div> 
						 <div class="dvViewBtn">
						   <div class="dvViewed">Viewed ${getVisitTime(this.UTS_Date)}</div>
                           ${this.feedbacks>0?`<a class="lnkFeedTravel" href="${getSiteURL(this.UTS_Site)}/${this.STR_PlaceTitle.replace(/ /g,"_")}/${this.PDL_Title.replace(/ /g,"_")}/feedback-${this.PDLID}">${this.feedbacks} Travelers reviewed this package</a>`:""}  
						   <a class="dvViewIt" href="${getSiteURL(this.UTS_Site)}/${this.STR_PlaceTitle.replace(/ /g,"_")}/${this.PDL_Title.replace(/ /g,"_")}/package-${this.PDLID}"> Customize It</a>
                         </div>
                       </div>`)}),e<i&&(f=parseInt(e,10)+1,t=t+`<div class="dvViewDisplayMore" id="displayMore${e}">
					                     <button onclick="ShowHideMore(${f}, ${i} 10 More recently Viewed Packages</button>
					                   </div>`),t=t+"<\/div>";t=t+"<\/div>";$("div .dvRoundContainer").append(t)}function getSiteURL(n){let t;switch(n){case"TMED":t="/europe";break;case"TMASIA":t="/asia";break;case"TMLD":t="/latin"}return t}function getVisitTime(n){const t=Date.parse(n),i=new Date(t),r=new Date;return timeBetween(i,r)}var fileVersion=8012022,utVisitorID=-1,cookVisTot=0,visitID;$(document).ready(function(){if(Cookies.get("ut2")!=undefined){var n=Cookies.get("ut2").split("&"),t=n[0].split("=");visitID=t[1]}else _ut2Functions.push(function(){utValues=_ut2;jQuery.each(utValues,function(n,t){n=="_utvId"&&(visitID=t)})});utVisitorID=visitID;console.log("recently utVisitorID: ");console.log(utVisitorID);$.ajax({url:"/Api/RecentlyViewed",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({Name:utVisitorID}),type:"POST",success:function(n){var t,i;console.log("Api/RecentlyViewed: ");console.log(n);pkVisited=n;t=0;pkVisited?t=pkVisited.length:"";i=Math.ceil(t/10);$("#novisited").text(t);t>0&&(buildRecentlyViewed(pkVisited),ShowHideMore(1,i))},error:function(n){console.log(n)}})});switch(this.UTS_Site){case"TMED":siteURL="/europe";break;case"TMASIA":siteURL="/asia";break;case"TMLD":siteURL="/latin"}var timestamp=Date.parse(this.UTS_Date),jsdate=new Date(timestamp),today=new Date,visTimeR=timeBetween(jsdate,today);