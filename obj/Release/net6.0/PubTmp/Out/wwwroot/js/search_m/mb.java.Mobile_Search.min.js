function showDiv(n){n!="dvFilterPacks"?($("#dvResultsNumber").hide(),$("#goTop").hide()):($("#dvResultsNumber").show(),$("#goTop").show());$('div[id^="dvFilter"]').hide();$("html, body").scrollTop();$("#"+n).show("slide",{},500)}function unique(n){return $.grep(n,function(t,i){return i===$.inArray(t,n)})}function BuildFilterExpression(){var f="",t,i,e,r,o,u,s,n,h;for($('div.selectedOption[id^="optPrice"]').each(function(){f=f+$(this).attr("id").replace("optPrice","")+"P"}),f=f.length>1?f.substring(0,f.length-1):f,t="",$('div.selectedOption[id^="optLen"]').each(function(){t=t+$(this).attr("id").replace("optLen","")+"L"}),t=t.length>1?t.substring(0,t.length-1):t,i="",e=[],$('div.selectedOptionC[id*="Countries"]').each(function(){e.push($(this).attr("id").replace("optCkCountries","").replace("optCk2MoreCountries",""))}),e=unique(e),n=0;n<=e.length-1;n++)i=i+e[n].replace(/_/g," ")+"_";for(i=i.length>1?i.substring(0,i.length-1):i,r="",o=[],$('div.selectedOptionC[id*="Cities"]').each(function(){o.push($(this).attr("id").replace("optCkCities","").replace("optCk2MoreCities",""))}),o=unique(o),n=0;n<=o.length-1;n++)r=r+o[n].replace(/_/g," ")+"_";for(r=r.length>1?r.substring(0,r.length-1):r,u="",s=[],$('div.selectedOptionC[id*="Interests"]').each(function(){s.push($(this).attr("id").replace("optCkInterests","").replace("optCk2MoreInterests",""))}),s=unique(s),n=0;n<=s.length-1;n++)u=u+s[n].replace(/_/g," ")+"_";return u=u.length>1?u.substring(0,u.length-1):u,h="",f+"|"+t+"|"+i+"|"+r+"|"+u}function ShowPacks(n){var t;n==1?($(window).scrollTop(0),$("#errMessage").hide(),$("#msgNoPacks").hide(),$("#goTop").hide(),$("#dvResultsNumber").show(),$("#resultsVal").text("0"),$("#dvFilterPacks").html('<div style="text-align:center;padding:35px 0;background-color:white;"><img src="https://pictures.tripmasters.com/siteassets/d/ajax-loader.gif" width="50" height="50" /><\/br><div style="color:navy;">Loading ...<\/div><\/div>')):$("#dvMore_"+n).html('<div style="text-align:center;padding-top:10px;background-color:white;"><img src="https://pictures.tripmasters.com/siteassets/d/ajax-loader.gif" width="50" height="50" /><\/br><div style="color:navy;">Loading ...<\/div><\/div>');var i=BuildFilterExpression(),r=$("#awsQ").val(),u=$("#orderByVal").val();console.log("/SearchPackages q = "+r+", filter = "+i+", sort = "+u);t={};t.url="/SearchPackages";t.type="POST";t.contentType="application/json; charset=utf-8";t.data='{"site":"", "q":"'+r+'", "filter":"'+i+'", "sort":"'+u+'", "page":"'+n+'"}';t.dataType="html";t.success=function(t){n==1?($("#dvFilterPacks").html(t),$("#goTop").show()):($("#dvMore_"+n).css("display","none"),$("#dvFilterPacks").append(t));var r=$("#noOfPacks").val();r==0||r==undefined?($("#goTop").hide(),i=="||||"?($("#errMessage").show(),$("#dvResultsNumber").hide()):$("#msgNoPacks").show()):$("#resultsVal").text(r)};t.error=function(n){$("#dvPacks").html(n.responseText);$("#dvWait").html("");$("#dvWait").hide();$("#dvPacks").show()};$.ajax(t)}function displayPackInfo(n){$("#"+n).is(":visible")?($("#"+n).hide(),$("#"+n.replace("divInfo","divInfoArrow")).removeClass("packIncludeDown").addClass("packIncludeUp")):($("#"+n).show(),$("#"+n.replace("divInfo","divInfoArrow")).removeClass("packIncludeUp").addClass("packIncludeDown"))}var fileVersion=8012022;$(document).ready(function(){$("#inpSearchAWS").val($("#awsQ").val());$('div[id^="optOrder"]').click(function(){$('div[id^="optOrder"]').removeClass("selectedOption").addClass("unselectedOption");$(this).removeClass("unselectedOption").addClass("selectedOption");var n=$(this).attr("id").replace("optOrder","");$("#orderByText").text($(this).text());$("#orderByVal").val(n)});$("#ClearFilter_optOrder").click(function(){$("#orderByText").text("Relevance");$("#orderByVal").val(5);$('div[id^="optOrder"]').removeClass("selectedOption").addClass("unselectedOption");$("#optOrder5").removeClass("unselectedOption").addClass("selectedOption")});$('div[id^="optPrice"]').click(function(){$('div[id^="optPrice"]').removeClass("selectedOption").addClass("unselectedOption");$(this).removeClass("unselectedOption").addClass("selectedOption")});$("#ClearFilter_optPrice").click(function(){$('div[id^="optPrice"]').removeClass("selectedOption").addClass("unselectedOption")});$('div[id^="optLen"]').click(function(){$('div[id^="optLen"]').removeClass("selectedOption").addClass("unselectedOption");$(this).removeClass("unselectedOption").addClass("selectedOption")});$("#ClearFilter_optLen").click(function(){$('div[id^="optLen"]').removeClass("selectedOption").addClass("unselectedOption")});$('div[id^="optCk"]').click(function(){$(this).hasClass("selectedOptionC")?$(this).removeClass("selectedOptionC"):$(this).addClass("selectedOptionC");var n=decodeURIComponent($(this).attr("id").replace("`","&#96;"));n.indexOf("2More")>0?$("#"+n.replace("2More","")).hasClass("selectedOptionC")?$("#"+n.replace("2More","")).removeClass("selectedOptionC"):$("#"+n.replace("2More","")).addClass("selectedOptionC"):$("#"+n.replace("optCk","optCk2More")).hasClass("selectedOptionC")?$("#"+n.replace("optCk","optCk2More")).removeClass("selectedOptionC"):$("#"+n.replace("optCk","optCk2More")).addClass("selectedOptionC")});$('div[id^="ClearFilter_optCk"]').click(function(){var n=$(this).attr("id").indexOf("2More")>0?$(this).attr("id").replace("ClearFilter_optCk2More",""):$(this).attr("id").replace("ClearFilter_optCk","");$('div[id^="optCk'+n+'"]').removeClass("selectedOptionC").addClass("unselectedOptionC");$('div[id^="optCk2More'+n+'"]').removeClass("selectedOptionC").addClass("unselectedOptionC")});$(".filterCategoryHeader, .blueButton").click(function(){showDiv("dvFilterPacks");ShowPacks(1)});$("#goTop").click(function(){$(window).scrollTop(0)});ShowPacks(1)});