async function getTop3Feedbacks(n){const t=`/Api/Top3FeedbackByCounId/${n}`;try{const n=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8"}});if(n.status===204)return;if(!n.ok){const t=await n.text();throw new Error(t);}const i=await n.json();if(!i)return;let r="";i.forEach(function(n){r+=`<li class="customer-reviews__item">${renderFeedback(n)}</li>`});$("#dReview").html(r)}catch(i){console.error("API getTop3Feedbacks: Request failed",i.message)}}function renderFeedback(n){const t=new Date(n.dep_date).toLocaleDateString("en-US");return`
                <div>
                    <div class="customer-reviews__wrapper">
                        <span class="customer-reviews__stars" style="--rating: ${n.pcc_overallscore}"></span>
                        <div class="customer-reviews__score">${n.pcc_overallscore} out of 5</div>
                    </div>
                    <p class="customer-reviews__text">${n.pcC_Comment}</p>
                </div>
                <span class="customer-reviews__date">Traveled on: ${t}</span>
                `}function toggleSection(n,t="Show More"){const i=document.getElementById(`${n}ToggleButton`);i&&i.addEventListener("click",()=>{const f=document.getElementById(`${n}List`),r=i.getAttribute("aria-expanded")==="true";f.classList.toggle("expanded",!r);i.setAttribute("aria-expanded",(!r).toString());const u=i.querySelector("span");u?u.textContent=r?t:"Show less":i.textContent=r?t:"Show less"})}function initSwipers(){new Swiper(`#swiper`,{navigation:{nextEl:`.swiper-button-next`,prevEl:`.swiper-button-prev`},breakpoints:{320:{slidesPerView:1,spaceBetween:20},768:{slidesPerView:3,spaceBetween:20}}})}function onClickFAQInfo(n){const i=n.id.split("-")[1],r=document.getElementById(`faqItem-${i}`);if(r){const u=n.getAttribute("aria-expanded")==="true";r.classList.toggle("expanded",!u);n.setAttribute("aria-expanded",(!u).toString());const t=document.getElementById(`faqInfo-${i}`);t.style.maxHeight=t.style.maxHeight?null:t.scrollHeight+"px"}}let placeID;document.addEventListener("DOMContentLoaded",()=>{placeID=$("#placeID").val(),toggleSection("suggested","See all"),toggleSection("activities"),initSwipers(),document.querySelectorAll('button[id*="faq-"]').forEach(n=>{n.addEventListener("click",()=>onClickFAQInfo(n))})}),function(){document.addEventListener("DOMContentLoaded",function(){function t(t,i){t.forEach(t=>{t.isIntersecting&&!n&&(n=!0,getTop3Feedbacks(placeID),i.unobserve(t.target))})}let n=!1;const i=new IntersectionObserver(t,{root:null,threshold:.1}),r=document.querySelector("#customerReviews");i.observe(r)})}();