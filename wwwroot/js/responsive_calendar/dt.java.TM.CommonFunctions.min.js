function IsMobileDevice(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.match(/Windows mobile/i)||navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/Opera Mini/i)?!0:!1}function identifyBrowser(n,t){var r={Chrome:[/Chrome\/(\S+)/],Firefox:[/Firefox\/(\S+)/],MSIE:[/MSIE (\S+);/],Opera:[/Opera\/.*?Version\/(\S+)/,/Opera\/(\S+)/],Safari:[/Version\/(\S+).*?Safari\//]},u,f,i,e;n===undefined&&(n=navigator.userAgent);t===undefined?t=2:t===0&&(t=1337);for(i in r)while(u=r[i].shift())if(f=n.match(u))return e=f[1].match(new RegExp("[^.]+(?:.[^.]+){0,"+--t+"}"))[0],i+" "+e;return null}function changeIt(n,t){var s=t,e=n.length,o=e,i=0,r="",f="",u="",h=n;if(s=="none")while(o>0)lastpercent=n.lastIndexOf("%"),lastpercent!=-1?(f=n.substring(lastpercent+1,n.length),n=n.substring(0,lastpercent),f.length>=2&&(u=f.substring(0,2),r=f.substring(2,f.length)+r,"01234567890abcdefABCDEF".indexOf(u.substring(0,1))!=-1&&"01234567890abcdefABCDEF".indexOf(u.substring(1,2))!=-1&&(u=String.fromCharCode(parseInt(u,16)),r=u+r)),o=lastpercent):(r=n+r,o=0);else for(i=0;i<e;i++)n.substring(i,i+1).charCodeAt(0)<255?r=isUnsafe(n.substring(i,i+1))==!1?r+n.substring(i,i+1):r+convert(n.substring(i,i+1)):(alert("Found a non-ISO-8859-1 character at position: "+(i+1)+",\nPlease eliminate before continuing."),r=h,i=e);return r}function formatCurrency(n){var i,t;for(n=n.toString().replace(/\$|\,/g,""),isNaN(n)&&(n="0"),sign=n==(n=Math.abs(n)),n=Math.floor(n*100+.50000000001),cents=n%100,n=Math.floor(n/100).toString(),cents<10&&(cents="0"+cents),i=Math.floor(n.length),i=Number(i)-1,t=0;t<Math.floor(Number(i+t)/3);t++)n=n.substring(0,Number(n.length)-(4*t+3))+","+n.substring(Number(n.length)-(4*t+3));return(sign?"":"-")+"$"+n}function ObjectPosition(n){var t=0,i=0;if(n.offsetParent)do t+=n.offsetLeft,i+=n.offsetTop;while(n=n.offsetParent);return[t,i]}function getBusinessDateObj(n){var t=new Date;t.setTime(t.getTime()-0);var r=t.getDay(),i=n,u=r+n;return u>=6&&(n-=6-r,i+=2,bookWeeks=Math.floor(n/5),i+=bookWeeks*2),t.setTime(t.getTime()+i*864e5),t}function activeCckBx(n){$("#"+n+" input:checkbox").each(function(){this.checked?$("#false"+this.id+"").addClass("falsecheckeddop"):$("#false"+this.id+"").removeClass("falsecheckeddop")});var t;$("#"+n+" .falsecheckdop").click(function(){return this.id.indexOf("falsedot")>-1?t=this.id.replace("falsedot",""):this.id.indexOf("false")>-1?t=this.id.replace("false",""):"",$(this).hasClass("falsecheckeddop")?($(this).removeClass("falsecheckeddop"),$("#"+t+"").removeAttr("checked")):($(this).addClass("falsecheckeddop"),$("#"+t+"").attr("checked",!0)),$(this.hash).trigger("click"),!1})}function getDistanceFromLatLonInKm(n,t,i,r){var u=deg2rad(i-n),f=deg2rad(r-t),e=Math.sin(u/2)*Math.sin(u/2)+Math.cos(deg2rad(n))*Math.cos(deg2rad(i))*Math.sin(f/2)*Math.sin(f/2),o=2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e));return 6371*o}function deg2rad(n){return n*(Math.PI/180)}function findPacks(n){var e=n,t=$("#"+e+"").formSerialize(),o,s,r,u,f,h=0;for(t=t.replace(/\+/g," "),t=t.replace(/\%7C/g,"|"),o=t.split("&"),i=0;i<o.length;i++)s=o[i].split("="),s[1]!=""&&(h=h+1,r=s[1].split("|"),h>1?(u=u+","+r[0],f=f+"_"+r[1].replace(/\s/g,"-")):(u=r[0],f=r[1].replace(/\s/g,"-")));if(u==undefined){alert("Please check at least one box. Thanks!");return}$("#allID").val(u);$("#allNA").val(f);$("#"+e+"").attr("action","/europe/Find_Package_to_"+f+".aspx");$("#"+e+"").submit()}function openDivInf(n,t,i,r){var u,f,o,e;u=r!=undefined?"dvpkInf"+n+r:"dvpkInf"+n;f=r!=undefined?"pic"+n+r:"pic"+n;t==1?($("#otherMr").show(),$('div[id^="dvpkInf"]').each(function(){var t=this.id.match(isNumber);t!=n?($(this).hide(),$("#dvMrTxt"+t+"").show(),$("#dvMrPic"+t+"").hide()):($(this).slideDown("slow"),$("#dvMrTxt"+t+"").hide(),$("#dvMrPic"+t+"").show(),relPackCall(n,i,r))})):t==2?$("#"+u+"").slideUp("slow",function(){$("#dvMrTxt"+n+"").show();$("#dvMrPic"+n+"").hide();$("#otherMr").hide()}):t==3?(o=$("#"+f+"").attr("src"),o.indexOf("Plus")>-1?($("#"+u+"").slideDown("slow"),relPackCall(n,i,r),$("#"+f+"").attr("src","~/images/Minus.jpg")):($("#"+u+"").slideUp("slow"),$("#"+f+"").attr("src","~/images/Plus.jpg"))):t==4&&(e=$("#pic"+n+"").attr("src"),e.indexOf("Plus")>-1?($("#dvWait"+n+"").html('<img src="../java/europe/images/ajax-loader.gif" width="50" height="50" />'),$("#dvWait"+n+"").show(),$("#moreTx"+n+"").html("Close more details"),$("#pic"+n+"").attr("src","~/images/Minus.jpg"),relPackCall(n)):e.indexOf("Minus")>-1&&($("#moreTx"+n+"").html("More details"),$("#pic"+n+"").attr("src","~/images/Plus.jpg"),$("#dvpkInf"+n+"").slideUp()))}function openDivInfFNwXXX(n){var t=$("#pic"+n+"").attr("src");t.indexOf("Plus")>-1?($("#dvWait"+n+"").html('<img src="../java/europe/images/ajax-loader.gif" width="50" height="50" />'),$("#dvWait"+n+"").show(),$("#moreTx"+n+"").html("Close more details"),$("#pic"+n+"").attr("src","~/images/Minus.jpg"),relPackCallFNw(n)):t.indexOf("Minus")>-1&&($("#moreTx"+n+"").html("More details"),$("#pic"+n+"").attr("src","~/images/Plus.jpg"),$("#pkInf"+n+"").slideUp())}function relPackCallXXX(n,t,r){var u="",e="europe",f;f=r!=undefined?"dvRelPack"+n+r:"dvRelPack"+n;$.ajax({type:"POST",url:"/europe/WS_Library.asmx/sqlRelPackByPackID",contentType:"application/json; charset=utf-8",dataType:"json",data:'{packID:"'+n+'", site:"'+t+'"}',success:function(n){if(msg=eval("("+n.d+")"),msg!=""){for(u="<span>Related Package<br><\/span>",strPrts=msg.split("@"),i=0;i<=strPrts.length-1;i++)echP=strPrts[i].split("|"),u=u+'<a href="http://www.tripmasters.com/'+e+"/"+echP[0]+'_Vacations.aspx" style="margin-right:10px"><u>'+echP[0]+" ("+echP[1]+")<\/u><\/a>";$("#"+f+"").html(u).slideDown("slow")}},error:function(n){alert(n.responseText+" = error")}})}function relPackCall(n){var t="",r="",u="dvCom"+n,f="dvpkInf"+n,e="dvRel"+n;$.ajax({type:"POST",url:"/europe/WS_PackPage.asmx/sqlRelPackByPackID",contentType:"application/json; charset=utf-8",dataType:"json",data:'{packID:"'+n+'"}',success:function(o){if(msg=eval("("+o.d+")"),msg!=""){for(t='<div class="txt_grayLight11" style="padding:5px 3px;">Related Package<\/div><div style="padding:2px 2px;" align="left">',r='<div class="txt_11" style="padding:3px 3px 5px 3px;"><b>For more choices, combine cities found in this itinerary:<\/b><\/div><div style="padding:2px 2px;" align="left">',strPrts=msg.split("@"),i=0;i<=strPrts.length-1;i++)echP=strPrts[i].split("|"),t=t+'<span style="float:left; margin-right:5px; margin-bottom:3px;">',t=t+'<a href="/europe/'+echP[0].replace(/\s/g,"_")+'_Vacations.aspx" style="margin-right:10px">',t=t+'<span class="txt_grayLight11">',t=t+"<u>"+echP[0]+" ("+echP[1]+")<\/u>",t=t+"<\/span><\/a><\/span>",echP[2]!=5&&(r=r+'<span style="float:left; margin-right:5px; margin-bottom:3px;"><a style="cursor:pointer;" class="falsecheckdop" id="falsedop'+echP[3]+'" >'+echP[0]+"<\/a>",r=r+'<input type="checkbox" name="dop'+echP[3]+'" id="dop'+echP[3]+'" style="display:none" value="'+echP[3]+"|"+echP[0]+'"/>',r=r+"<\/span>");t=t+'<br style="clear:both"/><\/div>';r=r+'<br style="clear:both"/><\/div>';$("#"+e+"").html(t);$("#"+u+"").html(r);$("#dvWait"+n+"").hide();$("#dvWait"+n+"").html("");$("#"+f+"").slideDown();activeCckBx("frm"+n)}},error:function(t){alert(t.responseText+" = error");$("#dvWait"+n+"").html(t.responseText)}})}function hidePopUpInfo(){return $(".dvPopUp").hide(),!1}function broseDestFeed(){if($("#dvSelDst").length>0){var n=$("#dvSelDst");$.ajax({type:"POST",url:"/europe/WS_Library.asmx/allDestOnFeed",contentType:"application/json; charset=utf-8",dataType:"json",data:"{ 'user': '243' }",success:function(t){var f=t.d,r,i,u;for(dvSelectDst='<select class="Text_Arial12" name="tripTake" id="tripTake"><option value="0" selected="selected" class="optItalic">Select a destination<\/option>',r=f.split("@"),d=0;d<=r.length-2;d++)i=r[d].split("|"),u=i[0],u.charAt(0)=='"'&&(i[0]=i[0].replace('"',"")),dvSelectDst=dvSelectDst+'<option value="'+i[1]+'">'+i[0]+"<\/option>";dvSelectDst=dvSelectDst+"<\/select>";n.html(dvSelectDst);$("#tripTake").change(goToBrowse)},error:function(t){alert(t.responseText+" = error");n.html(t.responseText)}})}}function goToBrowse(){var n;n=$("#tripTake option:selected");window.location=n.val()}function showPopUp(n){var t,i,r,u;i=ObjectPosition(document.getElementById(n));u=i[0]-5+"px";r=i[1]+16+"px";n.indexOf("Partially")!=-1?(t='<div style="padding:0px 0px 7px 0px;"><b>Partially Guided:<\/b><\/div>',t=t+"<div>"+$("#inpparGuided").val().replace(".",".<br><br>")+"<\/div>"):n.indexOf("none")!=-1?(t='<div style="padding:0px 0px 7px 0px;"><b>None:<\/b><\/div>',t=t+"<div>has no value<\/div>"):(t='<div style="padding:0px 0px 7px 0px;"><b>Guided:<\/b><\/div>',t=t+"<div>"+$("#inpGuided").val()+"<\/div>");dvMpop=$('<div id="dvMess" class="Text_12_Blue"><\/div>');$("body").append(dvMpop);$("#dvMess").html(t);$("#dvMess").attr("style","left:"+u+"; top:"+r+"; position:absolute; display:block; border:solid 1px black; width:300px; padding:10px; background-color:#FFF;");$("#dvMess").show()}function hidePopUp(){$("#dvMess").hide()}function windowCMS(n,t,i){var r,u,f,e=navigator.userAgent,s=document.domain,o="/europe/cms/"+n+"/Web_Content.aspx?cms&wh=0&wf=0";r=screen.width?(screen.width-t)/2:0;u=screen.height?(screen.height-i)/2:0;f=e.indexOf("Firefox")>=0?"height="+i+",width="+t+",top="+u+",left="+r+",scrollbars=yes,resizable,toolbar=yes":e.indexOf("Chrome")>=0?"height="+i+",width="+t+",top="+u+",left="+r+"":"height="+i+",width="+t+",top="+u+",left="+r+",scrollbars=yes,resizable,location=yes";window.open(o,"CMS_Window",f)}function openMapBubble(n){var t=$("#dvBigMap").offset();$("#dvHotelInfo").html(n);$("#dvHstInfContainer").css({top:""+Number(t.top+600)+"px",width:"500px",position:"absolute",left:"50%","margin-left":"-250px","z-index":"8110"});$("#dvHstInfContainer").css({display:"block"}).animate({top:""+Number(t.top+300)+"px"},"slow")}function cmsPopUp(n,t){var i=$(t).offset();$.ajax({type:"POST",url:"/europe/WS_Library.asmx/sqlThisCMS",contentType:"application/json; charset=utf-8",dataType:"json",data:'{cmsID:"'+n+'"}',success:function(n){if(msg=eval("("+n.d+")"),msg!=""){"https:"===document.location.protocol?msg=msg.replace(/http:/g,"https:"):"";$("#dvDetailInfo").html(msg);$("#dvInfoContainer").css({display:"block"});$("#dvInfoContainer").css({top:""+Number(i.top)-200+"px","z-index":"8110",position:"absolute"});var t=$("#dvDetailInfo").outerWidth();$("#dvInfoContainer").animate({width:""+t+"px",left:"50%","margin-left":"-"+t/2+"px"})}},error:function(n){alert(n.responseText+" = error")}})}var isNumber=/[0-9]+/g,winWidth=window.screen.width,winHeight=window.screen.height,num,$dvSearch,$dvSearchDes,$dvMAsk;$(document).ready(function(){$dvSearch=$("#search_box");$dvSearchDes=$("#search_Destinos");$dvMAsk=$("#mask");var n;$("#qq").click(function(){var t,i;n="search_box";t=$(document).height();i=$(window).width();$("#mask").css({width:i,height:t});$("#mask").fadeIn(1e3);$("#mask").fadeTo("slow",.8);var r=ObjectPosition(this),u=r[0]-200,f=r[1];$dvSearch.attr("style","padding:20px; position:absolute; width:480px; height: 110px; display:none; z-index:9999; left:"+u+"px; top:"+f+"px");$dvSearch.fadeIn(2e3);$dvSearch.hAlign()});$("#mask").click(function(){$(this).hide();$("#"+n+"").hide()});$("#pcls").click(function(){$("#search_box").hide();$("#mask").hide()});$(".imgCityInfo").click(function(){var n,t=$(this).position().top-30,i="dv"+this.id.match(isNumber);return $.browser.msie?(n=$(this).position().left,$("#dvPopUp").css({left:n+"px",top:t+"px"})):(n=$(this).position().left,$("#dvPopUp").css({left:n+30+"px",top:t+"px"})),$("#dvPopUp").hide(),$("#dvPopContent").empty(),$("#dvPopContent").html($("#"+i+"").html()),$("#dvPopUp").show(),!1});$(".dvBoxClose").click(function(){$("#dvDetailInfo").html("");$("#dvInfoContainer").css({display:"none"})});$(".clkMore").click(function(){var n=this.id.match(isNumber),t=$("#img"+n+"").attr("src");t.indexOf("Plus")>-1?($("#img"+n+"").attr("src",t.replace("Plus","Minus")),$("#plus"+n+"").hide().removeClass("pLeftNoWrap"),$("#minus"+n+"").show().addClass("pLeftNoWrap"),$("#spMore"+n+"").html("close more info")):($("#img"+n+"").attr("src",t.replace("Minus","Plus")),$("#plus"+n+"").show().removeClass("pLeftNoWrap"),$("#minus"+n+"").hide().addClass("pLeftNoWrap"),$("#spMore"+n+"").html("more info"))})}),function(n){n.fn.hAlign=function(){return this.each(function(){var t=n(this).width(),i=n(this).outerWidth(),r=(t+(i-t))/2;n(this).css("position","absolute");n(this).css("left","50%");n(this).css("margin-left","-"+r+"px")})}}(jQuery);