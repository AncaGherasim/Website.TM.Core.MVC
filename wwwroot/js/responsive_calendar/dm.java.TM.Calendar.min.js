function dateByDest(n){var u,t,i,r;$("#qArrDate").datepicker("destroy");u=getBusinessDateObj(3);switch(n){case"TMLD":t=new Date(myDate.getTime()+6048e5);$("#qArrDate").datepicker({defaultDate:t,changeMonth:!1,changeYear:!1,numberOfMonths:2,showButtonPanel:!0,format:"yyyy-mm-dd",hideIfNoPrevNext:!0,prevText:"",nextText:"",minDate:t,maxDate:"+1Y",showOtherMonths:!1,beforeShow:function(n,t){var i=n.getBoundingClientRect(),r=$(n).position();setTimeout(function(){$(n).attr("lang")=="dvDomy"?t.dpDiv.css({left:Number(i.left-305)+"px"}):t.dpDiv.css({left:Number(i.left-205)+"px"})},0)}});break;case"TMLD":i=new Date(myDate.getTime()+6048e5);$("#qArrDate").datepicker({defaultDate:i,changeMonth:!1,changeYear:!1,numberOfMonths:2,showButtonPanel:!0,format:"yyyy-mm-dd",hideIfNoPrevNext:!0,prevText:"",nextText:"",minDate:i,maxDate:"+1Y",showOtherMonths:!1,beforeShow:function(n,t){var i=n.getBoundingClientRect(),r=$(n).position();setTimeout(function(){$(n).attr("lang")=="dvDomy"?t.dpDiv.css({left:Number(i.left-305)+"px"}):t.dpDiv.css({left:Number(i.left-205)+"px"})},0)}});break;case"TMAS":r=new Date(myDate.getTime()+6048e5);$("#qArrDate").datepicker({defaultDate:r,yearRange:"2014:2025",changeMonth:!1,changeYear:!1,numberOfMonths:2,showButtonPanel:!0,format:"yyyy-mm-dd",hideIfNoPrevNext:!0,prevText:"",nextText:"",minDate:r,showOtherMonths:!1,beforeShow:function(n,t){var i=n.getBoundingClientRect(),r=$(n).position();setTimeout(function(){$(n).attr("lang")=="dvDomy"?t.dpDiv.css({left:Number(i.left-305)+"px"}):t.dpDiv.css({left:Number(i.left-205)+"px"})},0)}})}}function chcUnchk(n){$('input[id^="achk"]').each(function(){var t=this.id.replace("chk","");t!=n&&($("#"+t+"").hasClass("abRehChoChk")&&$("#"+t+"").removeClass("abRehChoChk"),this.checked&&$(this).trigger("click"),$("#"+t+"").parent().removeClass("spRehChoActiv"))})}function highlightText(n,t){for(var f=$.trim(n).toLowerCase(),i=t.get(0).firstChild,e,u,r;(e=i.data.toLowerCase().indexOf(f))>=0;)u=i.splitText(e),i=u.splitText(f.length),r=document.createElement("span"),r.className="highlight",i.parentNode.insertBefore(r,i),r.appendChild(u)}function doitDep(){$("#qLeaveNA").length>0&&($("#qLeaveNA").autocomplete({autoFocus:!0,source:depCities,minLength:3,response:function(n,t){if(t.content.length===0)return alert("No valid airport found"),!1},select:function(n,t){return $("#qLeaveNA").val(t.item.value),$("#qLeaveID").val(t.item.id),!1}}).click(function(){IsMobileDevice()?$("#qLeaveNA").val(""):$("#qLeaveNA").select()}).data("ui-autocomplete")._renderItem=function(n,t){var i=$("<span><\/span>").text(t.label);return highlightText(this.term,i),$("<li><\/li>").append(i).appendTo(n)},$("#qCabinTxt").autocomplete({autoFocus:!0,source:airCabin,minLength:0,select:function(n,t){return $("#qCabinTxt").val(t.item.label),$("#qCabin").val(t.item.id),$("#qWair").focus(),!1}}).click(function(){$(this).val("")}).focus(function(){$(this).keydown()}),$("#goingTO, #goingFTO").autocomplete({autoFocus:!0,source:goingTojs,minLength:0,select:function(n,t){$("#goingTO, #goingFTO").val(t.item.label);$("#goingID, #goingFID").val(t.item.value);modifyDest(t.item.id);switch(t.item.id){case"TMAS":$("#aasia").trigger("click");break;case"TMLD":$("#alatin").trigger("click");break;case"TMLD":$("#aeurope").trigger("click")}return $("#qWair").focus(),!1}}).click(function(){$(this).val("")}).focus(function(){$(this).keydown()}))}function doitArr(n){$("#qSTCity"+n+"Txt").length>0&&($("#qSTCity"+n+"Txt").autocomplete({autoFocus:!0,source:stayLength,minLength:0,select:function(t,i){return $("#qSTCity"+n+"Txt").val(i.item.value),$("#qSTCity"+n+"").val(i.item.id),$("#qWair").focus(),!1}}).click(function(){$(this).val("")}).focus(function(){$(this).keydown()}),$("#qNACity"+n+"").autocomplete({autoFocus:!0,source:function(n,t){var i;n.term.length<4?i=new RegExp("^"+$.ui.autocomplete.escapeRegex(n.term),"i"):n.term.length>=4&&(i=new RegExp("\\b"+$.ui.autocomplete.escapeRegex(n.term),"i"));t($.map(arrivalCities,function(n){if(i.test(n.value)||i.test(n.code))return n}))},minLength:3,response:function(n,t){if(t.content.length===0)return $("#"+this.id+"").val("type city name here"),$("#"+this.id.replace("NA","ID")+"").val(""),alert("No valid destination found to "+$("#goingTO").val()+" \n\nPlease try again."),!1},select:function(t,i){return $("#qNACity"+n+"").val(i.item.value),$("#qIDCity"+n+"").val(i.item.id),!1},close:function(n){if($("#"+n.target.id.replace("NA","ID")+"").val()=="-1"){var i=$(this).data("ui-autocomplete").menu.element[0].children[0],r=$(".ui-autocomplete"),u=r.val(),t=$(i).text();$("#"+this.id+"").val(t.substring(0,t.indexOf("-")));$.map(arrivalCities,function(i){$.each(i.label,function(){i.label==t&&$("#"+n.target.id.replace("NA","ID")+"").val(i.id)})})}}}).click(function(){if($("#"+this.id+"").val()!="type city name here"&&$("#"+this.id+"").val("type city name here"),$("#"+this.id.replace("NA","ID")+"").val("-1"),$("#goingTO").val()=="")return popError("goingTO","Please select a valid going to region !  <br> <a href=\"javascript:spanClick('goingTO')\">OK<\/a>"),!1;IsMobileDevice()?$("#qNACity"+n+"").val(""):$("#qNACity"+n+"").select()}).data("ui-autocomplete")._renderItem=function(n,t){var i=$("<a><\/a>").text(t.label);return highlightText(this.term,i),$("<li><\/li>").append(i).appendTo(n)})}function doitFArr(n){$("#qFNACity"+n+"").length>0&&($("#qFNACity"+n+"").autocomplete({autoFocus:!0,source:arrivalCities,minLength:3,response:function(n,t){if(t.content.length===0)return alert("No valid destination found to "+$("#goingFTO").val()+" \n\nPlease try again."),!1},select:function(t,i){return $("#qFNACity"+n+"").val(i.item.label),$("#qFIDCity"+n+"").val(i.item.id),!1}}).click(function(){if($("#goingFTO").val()=="")return popError("goingFTO","Please select a valid going to region !  <br> <a href=\"javascript:spanClick('goingFTO')\">OK<\/a>"),!1;IsMobileDevice()?$("#qFNACity"+n+"").val(""):$("#qFNACity"+n+"").select()}).data("ui-autocomplete")._renderItem=function(n,t){var i=$("<a><\/a>").text(t.label);return highlightText(this.term,i),$("<li><\/li>").append(i).appendTo(n)})}function modifyDest(n){switch(n){case"TMAS":arrivalCities=$.grep(arrvCTY,function(n){return n.dept=="TMAS"});dateByDest("TMAS");break;case"TMLD":arrivalCities=$.grep(arrvCTY,function(n){return n.dept=="TMLD"});dateByDest("TMLD");break;case"TMLD":arrivalCities=$.grep(arrvCTY,function(n){return n.dept=="TMLD"});dateByDest("TMLD")}switch(BorF){case"BYO":$('input[id^="qNACity"]').each(function(){$(this).val("type city name here");$("#"+this.id.replace("NA","ID")+"").val(-1);doitArr(this.id.match(isNumber))});break;case"FIND":$('input[id^="qFNACity"]').each(function(){$(this).val("type city name here");$("#"+this.id.replace("NA","ID")+"").val(-1);doitFArr(this.id.match(isNumber))})}}function modifyDestCookie(n){switch(n){case"TMAS":arrivalCities=$.grep(arrvCTY,function(n){return n.dept=="TMAS"});dateByDest("TMAS");break;case"TMLD":arrivalCities=$.grep(arrvCTY,function(n){return n.dept=="TMLD"});dateByDest("TMLD");break;case"TMLD":arrivalCities=$.grep(arrvCTY,function(n){return n.dept=="TMLD"});dateByDest("TMLD")}switch(BorF){case"BYO":$('input[id^="qNACity"]').each(function(){doitArr(this.id.match(isNumber))});break;case"FIND":$('input[id^="qFNACity"]').each(function(){doitFArr(this.id.match(isNumber))})}}function qaddCity(n,t){var r,u,i,f,e,o;if(t>12)return alert("For best results, no more than 12 cities is allowed. Thanks."),!1;if(t<=12){i="";r=jscal==="B"?"dvbCalLineConteiner":"dvbCalSmallConteiner";u=jscal==="B"?"spRemove":"spSmallRemove";switch(BorF){case"BYO":i="<!-- city  "+t+' -->\t\t\t<div class="'+r+'" id="dvCity'+t+'">\t\t\t<div>\t\t\t<input name="qIDCity'+t+'" type="hidden" id="qIDCity'+t+'" value="-1"/>\t\t\t<input type="text" name="qNACity'+t+'" id="qNACity'+t+'" value="type city name here"/>\t\t\t<\/div>\t\t\t<div >\t\t\t<span class="'+u+'" id="spRemove'+t+'" onClick="qDelCty('+t+')">Remove City<\/span>\t\t\t<\/div>\t\t\t<div >\t\t\t<input type="text" name="qSTCity'+t+'Txt" id="qSTCity'+t+'Txt" value="3 nights"/>\t\t\t<input name="qSTCity'+t+'" type="hidden" id="qSTCity'+t+'" value="3"/>\t\t\t<\/div>\t\t\t<br style="clear:both"/>\t\t\t<\/div><!-- end city '+t+" -->";f=$("#dvCity"+n);$(i).insertAfter(f);doitArr(t);break;case"FIND":e="<!-- city  "+t+' -->\t\t\t<div class="dvbCalLineConteiner" id="dvFCity'+t+'">\t\t\t<div>\t\t\t<input type="text" name="qFNACity'+t+'" id="qFNACity'+t+'" value="type city name here"/>\t\t\t<input name="qFIDCity'+t+'" type="hidden" id="qFIDCity'+t+'" value="-1"/>\t\t\t<\/div>\t\t\t<div >\t\t\t<span class="spRemove" id="spFRemove'+t+'" onClick="qDelCty('+t+')">Remove City<\/span>\t\t\t<\/div>\t\t\t<br style="clear:both"/>\t\t\t<\/div><!-- end city '+t+" -->";o=$("#dvFCity"+n);$(e).insertAfter(o);doitFArr(t)}}}function insertAfter(n,t){n.parentNode.insertBefore(t,n.nextSibling)}function countElement(n){var t,i;for(d=1;d<=12;d++)i=document.getElementById(n+d),i?t=d:d=13;return t}function qDelCty(n){var f,e,r,u,t;switch(BorF){case"BYO":for(r=n+1,u=IsMobileDevice()!=null||identifyBrowser().indexOf("Firefox")>0?countElement("dvCity"):$('div[id*="dvCity"').length,$("#dvCity"+n+"").remove(),i=r;i<=u;i++)$("#dvCity"+i+"").length>0&&(t=i-1,$("#dvCity"+i+"").attr("id","dvCity"+t+""),$("#qNACity"+i+"").attr("name","qNACity"+t+""),$("#qNACity"+i+"").attr("id","qNACity"+t+""),$("#qIDCity"+i+"").attr("name","qIDCity"+t+""),$("#qIDCity"+i+"").attr("id","qIDCity"+t+""),$("#spRemove"+i+"").attr("onClick","qDelCty("+t+");"),$("#spRemove"+i+"").attr("id","spRemove"+t+""),$("#qSTCity"+i+"Txt").attr("name","qSTCity"+t+"Txt"),$("#qSTCity"+i+"Txt").attr("id","qSTCity"+t+"Txt"),$("#qSTCity"+i+"").attr("name","qSTCity"+t+""),$("#qSTCity"+i+"").attr("id","qSTCity"+t+""),doitArr(t));break;case"FIND":for(r=n+1,u=IsMobileDevice()!=null||identifyBrowser().indexOf("Firefox")>0?countElement("dvFCity"):$('div[id*="dvFCity"').length,$("#dvFCity"+n+"").remove(),i=r;i<=u;i++)$("#dvFCity"+i+"").length>0&&(t=i-1,$("#dvFCity"+i+"").attr("id","dvFCity"+t+""),$("#qFNACity"+i+"").attr("name","qFNACity"+t+""),$("#qFNACity"+i+"").attr("id","qFNACity"+t+""),$("#qFIDCity"+i+"").attr("name","qFIDCity"+t+""),$("#qFIDCity"+i+"").attr("id","qFIDCity"+t+""),$("#spFRemove"+i+"").attr("onClick","qDelCty("+t+");"),$("#spFRemove"+i+"").attr("id","spFRemove"+t+""),doitFArr(t))}}function validateBYO(){var r;if(window.scrollTo(0,0),howManyhas=IsMobileDevice()!=null||identifyBrowser().indexOf("Firefox")>0?countElement("dvCity"):$('div[id*="dvCity"]').length,$("#goingTO").val()==""){var n="goingTO",t="'goingTO'",i='Please select a valid going to region !  <br> <a href="javascript:spanClick('+t+')">OK<\/a>';return popError(n,i),!1}if($("input[name='qWair']:checked").val()=="True"&&($("#qLeaveID").val()==-1||$("#qLeaveID").val()=="")){var n="qLeaveNA",t="'qLeaveNA'",i='Please select a valid US city airport ! <br> <a href="javascript:spanClick('+t+')">OK<\/a>';return popError(n,i),!1}if($("#qArrDate").val()=="mm/dd/yyyy"){var n="qArrDate",t="'qArrDate'",i='Please select a valid arrival date !  <br> <a href="javascript:spanClick('+t+')">OK<\/a>';return popError(n,i),!1}for(y=1;y<=howManyhas;y++)if(r=$("#qIDCity"+y+"").val(),r==-1||r==""){var n="qNACity"+y,t="'qNACity"+y+"'",i='Please select a valid destination !  <br> <a href="javascript:spanClick('+t+')">OK<\/a>';return popError(n,i),!1}submitForm("FormBYO")}function validateFIND(){var n;if(window.scrollTo(0,0),howManyhas=IsMobileDevice()!=null||identifyBrowser().indexOf("Firefox")>0?countElement("dvFCity"):$('div[id*="dvFCity"]').length,$("#goingFTO").val()==""){var t="goingFTO",i="'goingFTO'",r='Please select a valid going to region !  <br> <a href="javascript:spanClick('+i+')">OK<\/a>';return popError(t,r),!1}for(y=1;y<=howManyhas;y++)if(n=$("#qFIDCity"+y+"").val(),n==-1||n==""){var t="qFNACity"+y,i="'qFNACity"+y+"'",r='Please select a valid destination !  <br> <a href="javascript:spanClick('+i+')">OK<\/a>';return popError(t,r),!1}findCombination()}function popError(n,t){$("#dvErrMess").html('<img src="/images/Symbols-Warning-icon-32.gif" width="32" height="32" align="absmiddle" style="padding-top:5px;" /> '+t+"");var i=$("#"+n+"").offset(),r=i.left+10,u=i.top-80;$("#dvError").attr("style","position:absolute; display:none; z-index:9999; left:"+r+"px; top:"+u+"px; width:auto;");$("#dvError").fadeIn(100)}function spanClick(n){$("#dvError").hide();IsMobileDevice()&&$("#"+n+"").val("");n=="qArrDate"?$("#"+n+"").datepicker("show"):n.indexOf("going")>-1?$("#"+n+"").focus():n.indexOf("xtxtNoOfNts")>-1?$("#"+n+"").focus():$("#"+n+"").trigger("click")}function CO_showBg(){maskHeight=$(document).height();$dvMask.css({height:maskHeight});$dvMask.show();$dvOptions.html('<div class="dvCalContainer" style="width:600px; height:200px;"><div style="margin:80px 180px;"><img src="~/images/loader.gif"><\/div><\/div>');$dvTransOptResp.dvScroolWait();$dvTransOptResp.show()}function CO_hideBg(){$dvMask.hide()}function startOver(){$dvTransOptResp.hide();$dvOptions.html();CO_hideBg();window.scrollTo(100,0)}function hiddenDiv(){$dvTransOptResp.hide();$dvOptions.html();CO_hideBg();window.scrollTo(100,0)}function submitForm(n){switch(n){case"FormBYO":var t="";t=$("#"+n+"").formSerialize();CO_showBg();$.ajax({url:"/europe/W_GET_T4TransportationOptions.aspx",data:t,type:"POST",success:function(n){processResponse(n);setCookie("TM_BackCookie",t,1)},error:function(n){$dvOptions.html(n.responseText)}})}}function processResponse(n){window.ActiveXObject?($dvOptions.html(n),doitTranspOpt()):document.implementation&&document.implementation.createDocument?($dvOptions.html(n),doitTranspOpt()):alert("Your browser cannot handle this script");$dvTransOptResp.dvScrool();$dvTransOptResp.show()}function doitTranspOpt(){$("#xCabinTxt").autocomplete({autoFocus:!0,source:airCabin,minLength:0,select:function(n,t){return $("#xCabinTxt").val(t.item.label),$("#xCabin").val(t.item.id),$("#qWair").focus(),!1}}).click(function(){$(this).val("").focus()}).focus(function(){$(this).keydown()});$('input:text[id^="xtxtNoOfNts"]').each(function(){$("#"+this.id+"").autocomplete({autoFocus:!0,source:stayLength,minLength:0,select:function(n,t){return $("#"+this.id+"").val(t.item.value),$("#"+this.id.replace("txt","sel")+"").val(t.item.id),$("#qWair").focus(),!1}}).click(function(){$(this).val("")}).focus(function(){$(this).keydown()})});$('input:text[id^="xtxtpickupDay"]').each(function(){$("#"+this.id+"").autocomplete({autoFocus:!0,source:pickDay,minLength:0,select:function(n,t){return $("#"+this.id+"").val(t.item.value),$("#"+this.id.replace("txt","")+"").val(t.item.id),$("#qWair").focus(),!1}}).click(function(){$(this).val("")}).focus(function(){$(this).keydown()})});$('input:text[id^="xtxtdropoffDay"]').each(function(){$("#"+this.id+"").autocomplete({autoFocus:!0,source:pickDay,minLength:0,select:function(n,t){return $("#"+this.id+"").val(t.item.value),$("#"+this.id.replace("txt","")+"").val(t.item.id),$("#qWair").focus(),!1}}).click(function(){$(this).val("")}).focus(function(){$(this).keydown()})});$('input:text[id^="xtxtdropoffCity"]').each(function(){var t=$("#"+this.id.replace("txt","data")+"").val().split("@"),r=[],u,n;for(i=0;i<=t.length-1;i++)n=t[i].split("|"),u={label:n[1],value:n[1],id:n[0]},r.push(u);$("#"+this.id+"").autocomplete({autoFocus:!0,source:r,minLength:0,select:function(n,t){return $("#"+this.id+"").val(t.item.value),$("#"+this.id.replace("txt","")+"").val(t.item.id),carDropOffX(t.item.id,this.id.match(isNumber)),$("#qWair").focus(),!1}}).click(function(){$(this).val("")}).focus(function(){$(this).keydown()})});$("#xxtxtiRoomsAndPax").autocomplete({autoFocus:!0,source:paxRooms,minLength:0,select:function(n,t){return $("#"+this.id+"").val(t.item.value),$("#"+this.id.replace("txt","")+"").val(t.item.id),xchangePaxByRoom(t.item.id),$("#qWair").focus(),!1}}).click(function(){$(this).val("")}).focus(function(){$(this).keydown()});$("#xxtxtiAdults").autocomplete({autoFocus:!0,source:adultPax,minLength:0,select:function(n,t){return $("#"+this.id+"").val(t.item.value),$("#"+this.id.replace("txt","")+"").val(t.item.value),$("#qWair").focus(),!1}}).click(function(){$(this).val("")}).focus(function(){$(this).keydown()});$("#xxtxtiChildren").autocomplete({autoFocus:!0,source:childPax,minLength:0,select:function(n,t){return $("#"+this.id+"").val(t.item.value),$("#"+this.id.replace("txt","")+"").val(t.item.value),xSelChildren(t.item.value,1,1),$("#qWair").focus(),!1}}).click(function(){$(this).val("")}).focus(function(){$(this).keydown()});$('input:text[id^="xxtxtRoom"]').each(function(){this.id.indexOf("iAdults")>0&&$("#"+this.id+"").autocomplete({autoFocus:!0,source:adultPax,minLength:0,select:function(n,t){return $("#"+this.id+"").val(t.item.value),$("#"+this.id.replace("txt","")+"").val(t.item.value),$("#qWair").focus(),!1}}).click(function(){$(this).val("")}).focus(function(){$(this).keydown()});this.id.indexOf("iChildren")>0&&$("#"+this.id+"").autocomplete({autoFocus:!0,source:childPax,minLength:0,select:function(n,t){return $("#"+this.id+"").val(t.item.value),$("#"+this.id.replace("txt","")+"").val(t.item.value),xSelChildren(t.item.value,Number(this.id.match(isNumber)),1),$("#qWair").focus(),!1}}).click(function(){$(this).val("")}).focus(function(){$(this).keydown()})})}function submitToBook(){var f=$('input[id="qWair"][value="True"]').prop("checked"),i,r,n,t,u;if($("#xCabinTxt").val()==""&&f)return n="'xCabinTxt'",t='Select cabin type !  <br> <a href="javascript:spanClick('+n+')">OK<\/a>',popError("xCabinTxt",t),!1;if($('input[id^="xtxtNoOfNts"]').each(function(){if($(this).val()==""){var n="'"+this.id+"'",t='Select a stay length !  <br> <a href="javascript:spanClick('+n+')">OK<\/a>';return popError(this.id,t),!1}}),$("#dvError").css("display")=="block")return!1;$("#xselRooms").val(rom);$("#xiRoomsAndPax").val($("#xxiRoomsAndPax").val());switch(rom){case"1":if(i=$("#xxiAdults").val(),paxChild=$("#xxiChildren").val(),r=Number(i)+Number(paxChild),r>6)return n="'dvRoom1'",t='Max guest allowed (adults + children) are 6 !  <br> <a href="javascript:spanClick('+n+')">OK<\/a>',popError("dvRoom1",t),!1;if(checkChildAges(1))$("#xiAdults").val($("#xxiAdults").val()),$("#xiChildren").val($("#xxiChildren").val()),$("#xiChild1").val($("#xxiChild1").val()),$("#xiChild2").val($("#xxiChild2").val());else return!1;break;case"2":if(i=Number($("#xxiAdults").val())+Number($("#xxRoom2_iAdults").val()),paxChild=Number($("#xxiChildren").val())+Number($("#xxRoom2_iChildren").val()),r=Number(i)+Number(paxChild),r>6)return n="'dvRoom1'",t='Max guest allowed (adults + children) are 6 !  <br> <a href="javascript:spanClick('+n+')">OK<\/a>',popError("dvRoom1",t),!1;if(checkChildAges(2))$("#xiAdults").val($("#xxiAdults").val()),$("#xiChildren").val($("#xxiChildren").val()),$("#xiChild1").val($("#xxiChild1").val()),$("#xiChild2").val($("#xxiChild2").val()),$("#xRoom2_iAdults").val($("#xxRoom2_iAdults").val()),$("#xRoom2_iChildren").val($("#xxRoom2_iChildren").val()),$("#xRoom2_iChild1").val($("#xxRoom2_iChild1").val()),$("#xRoom2_iChild2").val($("#xxRoom2_iChild2").val());else return!1;break;case"3":if(i=Number($("#xxiAdults").val())+Number($("#xxRoom2_iAdults").val())+Number($("#xxRoom3_iAdults").val()),paxChild=Number($("#xxiChildren").val())+Number($("#xxRoom2_iChildren").val())+Number($("#xxRoom3_iChildren").val()),r=Number(i)+Number(paxChild),r>6)return n="'dvRoom1'",t='Max guest allowed (adults + children) are 6 !  <br> <a href="javascript:spanClick('+n+')">OK<\/a>',popError("dvRoom1",t),!1;if(checkChildAges(3))$("#xiAdults").val($("#xxiAdults").val()),$("#xiChildren").val($("#xxiChildren").val()),$("#xiChild1").val($("#xxiChild1").val()),$("#xiChild2").val($("#xxiChild2").val()),$("#xRoom2_iAdults").val($("#xxRoom2_iAdults").val()),$("#xRoom2_iChildren").val($("#xxRoom2_iChildren").val()),$("#xRoom2_iChild1").val($("#xxRoom2_iChild1").val()),$("#xRoom2_iChild2").val($("#xxRoom2_iChild2").val()),$("#xRoom3_iAdults").val($("#xxRoom3_iAdults").val()),$("#xRoom3_iChildren").val($("#xxRoom3_iChildren").val()),$("#xRoom3_iChild1").val($("#xxRoom3_iChild1").val()),$("#xRoom3_iChild2").val($("#xxRoom3_iChild2").val());else return!1}u=$("#frmTransp").formSerialize();$dvOptions.html('<div class="dvCalContainer" style="width:600px; height:200px;"><div style="margin:80px 180px;"><img src="~/images/loader.gif"><\/div><\/div>');$.ajax({url:"/europe/W_GET_T4BuildComponentList.aspx",data:u,type:"POST",success:function(n){processResponseB(n)},error:function(n){$dvOptions.html(n.responseText);alert(n.responseText+" = error")}})}function processResponseB(n){window.ActiveXObject?$dvOptions.append(n):document.implementation&&document.implementation.createDocument?$dvOptions.append(n):alert("Your browser cannot handle this script");var t=$("#formSub").val();t==1&&(document.frmToBook.action="https://reservation.tripmasters.com/Tourpackage4/Itinerary/Create",document.frmToBook.submit(),$dvOptions.html(""))}function findCombination(){var i,r,f,n,u,t;$('input[id^="qFNACity"]').each(function(){f=this.id.match(isNumber);n=$("#"+this.id+"").val();n.indexOf("(")>-1&&(n=n.substring(0,n.indexOf("(")-1));f==1?(i=n,r=$("#"+this.id.replace("NA","ID")+"").val()):(i+="_"+n,r+=","+$("#"+this.id.replace("NA","ID")+"").val())});u="";u=$("#goingFID").val();t="";switch(u){case"TMLD":case"ED":t="europe";break;case"TMLD":case"LD":t="latin";break;case"TMAS":t="asia"}$("#allID").val(r);$("#allNA").val(i);document.FormFIND.action="http://www.tripmasters.com/"+t+"/Find_Package_to_"+i+".aspx";document.FormFIND.submit()}function getCookie(n){return document.cookie.length>0&&(c_start=document.cookie.indexOf(n+"="),c_start!=-1)?(c_start=c_start+n.length+1,c_end=document.cookie.indexOf(";",c_start),c_end==-1&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):null}function setCookie(n,t,i){var r=new Date;r.setTime(r.getTime()+i*864e5);document.cookie=n+"="+escape(t)+(i==null?"":";expires="+r.toGMTString())}function initCook(){var n,i=cookVal.indexOf("qWair"),t=cookVal.substr(i,cookVal.length);t=t.replace(/&/g,",");t=t.replace(/\+/g," ");$.each(t.split(","),function(t,i){var r;n=i.split("=");switch(!0){case n[0]=="qWair":n[1]=="True"?($('input[id="qWair"][value="True"]').prop("checked",!0),$("#AirParam").show()):n[1]=="False"&&($('input[name="qWair"][value="False"]').prop("checked",!0),$("#AirParam").hide());break;case n[0]=="qLeaveID":$("#qLeaveID").val(n[1]);break;case n[0]=="qLeaveNA":txt=changeIt(n[1],"none");txt.indexOf("+")!=-1&&(txt=txt.replace(/\+/g," "));$("#qLeaveNA").val(txt);case n[0]=="qCabin":$("#qCabin").val(n[1]);break;case n[0]=="qArrDate":r=changeIt(n[1],"none");$("#qArrDate").val(r);break;case n[0].indexOf("qIDCity")>-1:if(n[0].match(/[0-9]+/g)==1)$("#"+n[0]+"").val(n[1]);else{var u=n[0].match(/[0-9]+/g),f=Number(u)-1,e=n[0]+"|"+n[1];qaddCity(f,u,e);$("#"+n[0]+"").val(n[1])}break;case n[0].indexOf("qNACity")>-1:txt=changeIt(n[1],"none");txt.indexOf("+")!=-1&&(txt=txt.replace(/\+/g," "));$("#"+n[0]+"").val(txt);break;case n[0].indexOf("qSTCity")>-1:$("#"+n[0]+"").val(n[1]);break;case n[0]=="qutm_campaign":$("#qutm_campaign").val(n[1]);break;case n[0]=="goingID":$("#aeurope").removeClass("abRehChoChk");$("#alatin").removeClass("abRehChoChk");$("#aasia").removeClass("abRehChoChk");$("#achkasia").prop("checked",!1);$("#achkeurope").prop("checked",!1);$("#achklatin").prop("checked",!1);switch(n[1]){case"TMLD":$("#aeurope").addClass("abRehChoChk");$("#achkeurope").prop("checked",!0);$("#goingTO").val("Europe");$("#goingID").val("TMLD");dateByDest("TMLD");setTimeout("modifyDestCookie('TMLD')",1e3);break;case"TMLD":$("#alatin").addClass("abRehChoChk");$("#achklatin").prop("checked",!0);$("#goingTO").val("Latin America");$("#goingID").val("TMLD");dateByDest("TMLD");setTimeout("modifyDestCookie('TMLD')",1e3);break;case"TMAS":$("#aasia").addClass("abRehChoChk");$("#achkasia").prop("checked",!0);$("#goingTO").val("Asia, Pacific & Middle East");$("#goingID").val("TMAS");dateByDest("TMAS");setTimeout("modifyDestCookie('TMAS')",1e3)}$("#qutm_campaign").val(n[1])}});setCookie("TM_BackCookie","",-1)}var cookVal=getCookie("TM_BackCookie"),citySelID,BorF="BYO",$addButt,bTo,bFrom,$addCty,$noMore,depCities=[],arrivalCities=[],arrvCTY=[],airCabin=[{label:"Coach",value:"Coach",id:"Y"},{label:"Premium Economy",value:"Premium Economy",id:"W"},{label:"Business",value:"Business",id:"C"},{label:"First Class",value:"First Class",id:"F"}],stayLength=[],stayObj,adultObj,childPax,chilObj,windowWidth,windowHeight,maskHeight,maskWidth,$dvOptions,$dvMask,$dvTransOptResp,isIE,$frmCalNextStep,myDate,jscal;for(i=1;i<=14;i++)stayObj=i==1?{label:i+" nt",value:i+" night",id:i}:{label:i+" nts",value:i+" nights",id:i},stayLength.push(stayObj);var goingTojs=[{label:"Europe",value:"Europe",id:"TMLD"},{label:"Latin America",value:"Latin America",id:"TMLD"},{label:"Asia, Pacific & Middle East",value:"Asia, Pacific & Middle East",id:"TMAS"}],pickDay=[{label:"First Day",value:"First Day",id:"F"},{label:"Last Day",value:"Last Day",id:"L"}],paxRooms=[{id:"1|1",label:"1 room for 1 adult",value:"1 room for 1 adult"},{id:"1|2",label:"1 room for 2 adults",value:"1 room for 2 adults"},{id:"1|3",label:"1 room for 3 adults",value:"1 room for 3 adults"},{id:"1|4",label:"1 room for 4 adults",value:"1 room for 4 adults"},{id:"1|5",label:"1 room/suite for 5 adults",value:"1 room/suite for 5 adults"},{id:"1|6",label:"1 room/suite for 6 adults",value:"1 room/suite for 6 adults"},{id:"1|Other",label:"1 room with children or other options",value:"1 room with children or other options"},{id:"-1",label:"----------------------------------------------------",value:""},{id:"2|2-2",label:"2 rooms for (2 adults + 2 adults)",value:"2 rooms for (2 adults + 2 adults)"},{id:"2|3-3",label:"2 rooms for (3 adults + 3 adults)",value:"2 rooms for (3 adults + 3 adults)"},{id:"2|Other",label:"2 rooms with children or other options",value:"2 rooms with children or other options"},{id:"-1",label:"----------------------------------------------------",value:""},{id:"3|2-2-2",label:"3 rooms for (2 adults + 2 adults + 2 adults)",value:"3 rooms for (2 adults + 2 adults + 2 adults)"},{id:"3|Other",label:"3 rooms with children or other options",value:"3 rooms with children or other options"}],adultPax=[];for(a=1;a<=6;a++)adultObj={label:a,value:a},adultPax.push(adultObj);for(childPax=[],c=0;c<=2;c++)chilObj={label:c,value:c},childPax.push(chilObj);myDate=new Date;jscal="S";$(document).ready(function(){_utRawUrl.indexOf("default.")>-1||_utRawUrl.indexOf("Default.")>-1?jscal="B":"";$.ajax({type:"POST",url:"/europe/WS_Library.asmx/depCity",contentType:"application/json; charset=utf-8",dataType:"json",data:'{name:"%"}',success:function(n){var t=eval("("+n.d+")");depCities=$.map(t,function(n){return{label:n.plcNA+" - "+n.plcCO,value:n.plcNA,id:n.plcID}});doitDep()},error:function(n){alert(n.responseText)}});$.ajax({type:"POST",url:"/europe/WS_Library.asmx/arrCity",contentType:"application/json; charset=utf-8",dataType:"json",data:'{name:"%"}',success:function(n){var t=eval("("+n.d+")");arrvCTY=$.map(t,function(n){return{label:n.CtyNA+" ("+n.CouNA+")  - "+n.CtyCOD,value:n.CtyNA+" ("+n.CouNA+")",id:n.CtyID,dept:n.deptNA}});arrivalCities=$.grep(arrvCTY,function(n){return n.dept=="TMLD"});doitArr(1);doitFArr(1)},error:function(n){alert(n.responseText)}});$('input[id^="achk"]').each(function(){this.checked?$("#"+this.id.replace("chk","")).addClass("abRehChoChk").parent().addClass("spRehChoActiv"):$("#"+this.id.replace("chk","")).removeClass("abRehChoChk").parent().removeClass("spRehChoActiv")});$(".abRehCho").click(function(){$(this).hasClass("abRehChoChk")?$(this).removeClass("abRehChoChk"):$(this).addClass("abRehChoChk");$("#"+this.id.replace("a","achk")+"").trigger("click");$(this).parent().addClass("spRehChoActiv");chcUnchk(this.id);modifyDest("TMLD");switch($("#"+this.id.replace("a","achk")+"").val()){case"TMAS":$("#goingTO, #goingFTO").val("Asia, Pacific & Middle East");$("#goingID, #goingFID").val("TMAS");dateByDest("TMAS");break;case"TMLD":$("#goingTO, #goingFTO").val("Latin America");$("#goingID, #goingFID").val("TMLD");dateByDest("TMLD");break;case"TMLD":$("#goingTO, #goingFTO").val("Europe");$("#goingID, #goingFID").val("TMLD");dateByDest("TMLD")}return!1});$("#tabByo").click(function(){$(this).hasClass("tabInactive")&&($(this).attr("class","tabActive"),$("#tabFind").attr("class","tabInactive"),$("#dvbCalByoTools").show(),$("#dvbCalFindTools").hide(),BorF="BYO")});$("#tabFind").click(function(){$(this).hasClass("tabInactive")&&($(this).attr("class","tabActive"),$("#tabByo").attr("class","tabInactive"),$("#dvbCalFindTools").show(),$("#dvbCalByoTools").hide(),BorF="FIND")});$("#qWair").each(function(){this.checked?$(this).parent().addClass("spBoldTxt"):$(this).parent().removeClass("spBoldTxt")});$("input:radio[name=qWair]").click(function(){this.value=="True"?($("#spWair").addClass("spBoldTxt"),$("#spWout").removeClass("spBoldTxt"),$("#AirParam").show()):($("#spWair").removeClass("spBoldTxt"),$("#spWout").addClass("spBoldTxt"),$("#AirParam").hide())});$addCty=$("#inpAddCty");$noMore=$("#inpNoMore");$addCty.click(function(){bFrom=0;bTo=0;switch(BorF){case"BYO":bFrom=$('div[id^="dvCity"]').length;break;case"FIND":bFrom=$('div[id^="dvFCity"]').length}bFrom<12?(bTo=bFrom+1,qaddCity(bFrom,bTo)):alert("For Better results, not more than 12 cities is allowed")});$noMore.click(function(){switch(BorF){case"BYO":validateBYO();break;case"FIND":validateFIND()}});$dvOptions=$("#dvOptions");$dvMask=$("#dvMask");$dvTransOptResp=$("#dvTransOptResp");$frmCalNextStep=$("#frameTransOptResp");var n=$.cookie("utmcampaign"),t;n!=null&&(t=n.split("="),$("#qutm_campaign").length!=0&&$("#qutm_campaign").val(jQuery.trim(t[1])));cookVal!=null?initCook():($("#qIDCity1").val(-1),$("#qNACity1").val("type city name here"));dateByDest("TMLD")}),function(n){n.fn.dvScroolWait=function(){var r=n("#dvTransOptResp"),t=n(this).width(),i=n(this).outerWidth(),u=(t+(i-t))/2;n(this).css("left","50%");n(this).css("margin-left","-"+i/2+"px");n(this).css("top","80px")}}(jQuery),function(n){n.fn.dvScrool=function(){var t=n("#dvTransOptResp"),i=n(this).width(),r=n(this).outerWidth(),e=(i+(r-i))/2,u,f;n(this).css("left","50%");n(this).css("margin-left","-"+r/2+"px");n(this).css("top","80px");f=t.outerHeight();n(window).scroll(function(){u=n(this).height();u>f&&t.stop().animate({top:n(window).scrollTop()+30+"px"},"slow")})}}(jQuery);